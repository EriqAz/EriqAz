(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69c6e9cf"],{"9ed6":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("van-nav-bar",{attrs:{title:"登录"}}),r("van-cell-group",[r("van-field",{attrs:{required:"",label:"手机号",placeholder:"请输入用户名","error-message":e.error_mobile},on:{input:e.validate},model:{value:e.mobile,callback:function(t){e.mobile=t},expression:"mobile"}}),r("van-field",{attrs:{required:"",center:"",clearable:"",label:"验证码",placeholder:"请输入短信验证码","error-message":e.error_code},on:{input:e.validate},scopedSlots:e._u([{key:"button",fn:function(){return[r("van-button",{attrs:{size:"small",type:"primary"},on:{click:e.sendCode}},[e._v("发送验证码")])]},proxy:!0}]),model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1),r("div",{staticClass:"btn-wrap"},[r("van-button",{attrs:{type:"info"},on:{click:e.Login}},[e._v("登录")]),r("van-button",{attrs:{type:"primary"},on:{click:e.getUser}},[e._v("获取个人信息")])],1)],1)},a=[],o=r("1da1"),s=(r("96cf"),r("c24f")),c={name:"Login",data:function(){return{mobile:"15138705203",code:"246810",error_mobile:"",error_code:""}},methods:{sendCode:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["f"])(e.mobile);case 3:e.$toast.success("验证码发送成功"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$toast(t.t0.response.data.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},Login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.$toast.loading({duration:0,Overlay:!0,message:"加载中...",forbidClick:!0}),t.prev=3,t.next=6,Object(s["d"])(e.mobile,e.code);case 6:r=t.sent,e.$store.commit("user/setTokenInfo",r.data),e.$toast.success("登录成功"),n=e.$route.query.backto||"/",e.$router.push(n),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](3),e.$toast.fail(t.t0.response.data.message);case 16:case"end":return t.stop()}}),t,null,[[3,13]])})))()},validate:function(){return""===!this.mobile?(this.error_mobile="请输入手机号",!1):/^1\d{10}$/.test(this.mobile)?(this.error_mobile="",""===!this.code?(this.error_code="请输入验证码",!1):/^\d{6}$/.test(this.code)?(this.error_code="",!0):(this.error_code="验证码格式错误",!1)):(this.error_mobile="手机号格式不正确",!1)},getUser:function(){Object(s["c"])()}}},i=c,l=(r("c8ae"),r("2877")),u=Object(l["a"])(i,n,a,!1,null,"52bb30fe",null);t["default"]=u.exports},a718:function(e,t,r){},c8ae:function(e,t,r){"use strict";r("a718")}}]);
//# sourceMappingURL=chunk-69c6e9cf.a02d46f5.js.map