{"version":3,"sources":["webpack:///./src/views/user/profile.vue?d03a","webpack:///src/views/user/profile.vue","webpack:///./src/views/user/profile.vue?4b70","webpack:///./src/views/user/profile.vue","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$router","back","ref","iptChange","$refs","iptFile","click","user","photo","slot","name","clickName","gender","showGender","birthday","clickBirthday","saveName","model","value","callback","$$v","showName","expression","newName","trim","saveGender","showBirthday","minDate","maxDate","saveBirthday","currentDate","staticRenderFns","data","Date","created","getUserInfo","methods","component","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","error"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,aAAa,GAAG,MAAQ,QAAQC,GAAG,CAAC,aAAa,SAASC,GAAQ,OAAOT,EAAIU,QAAQC,WAAWP,EAAG,QAAQ,CAACQ,IAAI,UAAUL,MAAM,CAAC,KAAO,OAAO,OAAS,IAAIC,GAAG,CAAC,OAASR,EAAIa,aAAaT,EAAG,iBAAiB,CAACA,EAAG,WAAW,CAACG,MAAM,CAAC,UAAU,GAAG,MAAQ,KAAK,OAAS,IAAIC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAIc,MAAMC,QAAQC,WAAW,CAACZ,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,UAAU,MAAQ,SAAS,OAAS,SAAS,IAAM,QAAQ,MAAQ,GAAG,IAAMP,EAAIiB,KAAKC,OAAOC,KAAK,aAAa,GAAGf,EAAG,WAAW,CAACG,MAAM,CAAC,UAAU,GAAG,MAAQ,KAAK,MAAQP,EAAIiB,KAAKG,MAAMZ,GAAG,CAAC,MAAQR,EAAIqB,aAAajB,EAAG,WAAW,CAACG,MAAM,CAAC,UAAU,GAAG,MAAQ,KAAK,MAA4B,IAApBP,EAAIiB,KAAKK,OAAc,IAAI,KAAKd,GAAG,CAAC,MAAQ,SAASC,GAAQT,EAAIuB,YAAW,MAASnB,EAAG,WAAW,CAACG,MAAM,CAAC,UAAU,GAAG,MAAQ,KAAK,MAAQP,EAAIiB,KAAKO,UAAUhB,GAAG,CAAC,MAAQR,EAAIyB,kBAAkB,GAAGrB,EAAG,aAAa,CAACG,MAAM,CAAC,MAAQ,KAAK,qBAAqB,IAAIC,GAAG,CAAC,QAAUR,EAAI0B,UAAUC,MAAM,CAACC,MAAO5B,EAAY,SAAE6B,SAAS,SAAUC,GAAM9B,EAAI+B,SAASD,GAAKE,WAAW,aAAa,CAAC5B,EAAG,YAAY,CAACG,MAAM,CAAC,YAAc,UAAUoB,MAAM,CAACC,MAAO5B,EAAW,QAAE6B,SAAS,SAAUC,GAAM9B,EAAIiC,QAAwB,kBAARH,EAAkBA,EAAII,OAAQJ,GAAME,WAAW,cAAc,GAAG5B,EAAG,YAAY,CAACG,MAAM,CAAC,SAAW,UAAUoB,MAAM,CAACC,MAAO5B,EAAc,WAAE6B,SAAS,SAAUC,GAAM9B,EAAIuB,WAAWO,GAAKE,WAAW,eAAe,CAAC5B,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,OAAO,YAAY,MAAMC,GAAG,CAAC,aAAa,SAASC,GAAQT,EAAIuB,YAAW,MAAUnB,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ,IAAI,UAAU,IAAIC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAImC,WAAW,OAAO/B,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ,IAAI,UAAU,IAAIC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAImC,WAAW,QAAQ,GAAG/B,EAAG,YAAY,CAACG,MAAM,CAAC,SAAW,UAAUoB,MAAM,CAACC,MAAO5B,EAAgB,aAAE6B,SAAS,SAAUC,GAAM9B,EAAIoC,aAAaN,GAAKE,WAAW,iBAAiB,CAAC5B,EAAG,sBAAsB,CAACG,MAAM,CAAC,KAAO,OAAO,MAAQ,QAAQ,WAAWP,EAAIqC,QAAQ,WAAWrC,EAAIsC,SAAS9B,GAAG,CAAC,QAAUR,EAAIuC,cAAcZ,MAAM,CAACC,MAAO5B,EAAe,YAAE6B,SAAS,SAAUC,GAAM9B,EAAIwC,YAAYV,GAAKE,WAAW,kBAAkB,IAAI,IACzrES,EAAkB,G,mECoDtB,GACErB,KAAM,cACNsB,KAFF,WAGI,MAAO,CAELX,UAAU,EACVR,YAAY,EACZa,cAAc,EAEdnB,KAAM,GACNgB,QAAS,GACTI,QAAS,IAAIM,KAAK,MAClBL,QAAS,IAAIK,KACbH,YAAa,IAAIG,OAGrBC,QAhBF,WAiBI3C,KAAK4C,eAEPC,QAAS,CACP,YADJ,WACA,gLACA,iBADA,gBACA,EADA,EACA,KACA,SAFA,8CAIIzB,UALJ,WAMMpB,KAAK8B,UAAW,EAChB9B,KAAKgC,QAAUhC,KAAKgB,KAAKG,MAE3B,SATJ,WASA,2JACA,eADA,iEAEA,iCAFA,OAGA,sBAHA,8CAKI,WAdJ,SAcA,2KACA,2BADA,OAEA,gBACA,gBAHA,8CAKIK,cAnBJ,WAoBMxB,KAAKmC,cAAe,EACpBnC,KAAKuC,YAAc,IAAIG,KAAK1C,KAAKgB,KAAKO,WAExC,aAvBJ,WAuBA,qKACA,0CADA,SAEA,6BAFA,OAGA,kBACA,kBAJA,8CAMI,UA7BJ,SA6BA,mLAEA,oBACA,EAHA,wDAIA,kBACA,mBACA,eACA,aAEA,eACA,oBAVA,SAWA,kBAXA,gBAWA,EAXA,EAWA,WACA,eACA,yBAbA,qDAeA,sBAfA,+DCrGgW,I,YCO5VuB,EAAY,eACd,EACAhD,EACA0C,GACA,EACA,KACA,KACA,MAIa,aAAAM,E,8BClBf,IAAIC,EAAc,EAAQ,QACtBC,EAAiB,EAAQ,QAAuCC,EAEhEC,EAAoBC,SAASC,UAC7BC,EAA4BH,EAAkBI,SAC9CC,EAAS,wBACTC,EAAO,OAIPT,KAAiBS,KAAQN,IAC3BF,EAAeE,EAAmBM,EAAM,CACtCC,cAAc,EACdC,IAAK,WACH,IACE,OAAOL,EAA0BM,KAAK3D,MAAM4D,MAAML,GAAQ,GAC1D,MAAOM,GACP,MAAO","file":"js/chunk-45573f39.918f2d60.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"profile\"},[_c('van-nav-bar',{attrs:{\"left-arrow\":\"\",\"title\":\"编辑资料\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),_c('input',{ref:\"iptFile\",attrs:{\"type\":\"file\",\"hidden\":\"\"},on:{\"change\":_vm.iptChange}}),_c('van-cell-group',[_c('van-cell',{attrs:{\"is-link\":\"\",\"title\":\"头像\",\"center\":\"\"},on:{\"click\":function($event){return _vm.$refs.iptFile.click()}}},[_c('van-image',{attrs:{\"slot\":\"default\",\"width\":\"1.5rem\",\"height\":\"1.5rem\",\"fit\":\"cover\",\"round\":\"\",\"src\":_vm.user.photo},slot:\"default\"})],1),_c('van-cell',{attrs:{\"is-link\":\"\",\"title\":\"名称\",\"value\":_vm.user.name},on:{\"click\":_vm.clickName}}),_c('van-cell',{attrs:{\"is-link\":\"\",\"title\":\"性别\",\"value\":_vm.user.gender === 1? '女':'男'},on:{\"click\":function($event){_vm.showGender=true}}}),_c('van-cell',{attrs:{\"is-link\":\"\",\"title\":\"生日\",\"value\":_vm.user.birthday},on:{\"click\":_vm.clickBirthday}})],1),_c('van-dialog',{attrs:{\"title\":\"标题\",\"show-cancel-button\":\"\"},on:{\"confirm\":_vm.saveName},model:{value:(_vm.showName),callback:function ($$v) {_vm.showName=$$v},expression:\"showName\"}},[_c('van-field',{attrs:{\"placeholder\":\"请输入用户名\"},model:{value:(_vm.newName),callback:function ($$v) {_vm.newName=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"newName\"}})],1),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.showGender),callback:function ($$v) {_vm.showGender=$$v},expression:\"showGender\"}},[_c('van-nav-bar',{attrs:{\"title\":\"修改性别\",\"left-text\":\"取消\"},on:{\"click-left\":function($event){_vm.showGender=false}}}),_c('van-cell',{attrs:{\"title\":\"男\",\"is-link\":\"\"},on:{\"click\":function($event){return _vm.saveGender(0)}}}),_c('van-cell',{attrs:{\"title\":\"女\",\"is-link\":\"\"},on:{\"click\":function($event){return _vm.saveGender(1)}}})],1),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.showBirthday),callback:function ($$v) {_vm.showBirthday=$$v},expression:\"showBirthday\"}},[_c('van-datetime-picker',{attrs:{\"type\":\"date\",\"title\":\"选择年月日\",\"min-date\":_vm.minDate,\"max-date\":_vm.maxDate},on:{\"confirm\":_vm.saveBirthday},model:{value:(_vm.currentDate),callback:function ($$v) {_vm.currentDate=$$v},expression:\"currentDate\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"profile\">\n    <!-- 导航条 -->\n    <van-nav-bar left-arrow title=\"编辑资料\" @click-left=\"$router.back()\" />\n\n    <!-- 编辑区 -->\n    <input ref=\"iptFile\" type=\"file\" hidden @change=\"iptChange\">\n    <van-cell-group>\n      <van-cell is-link title=\"头像\" center @click=\"$refs.iptFile.click()\">\n        <van-image\n          slot=\"default\"\n          width=\"1.5rem\"\n          height=\"1.5rem\"\n          fit=\"cover\"\n          round\n          :src=\"user.photo\"\n        />\n      </van-cell>\n\n      <van-cell is-link title=\"名称\" :value=\"user.name\" @click=\"clickName\" />\n      <van-cell is-link title=\"性别\" :value=\"user.gender === 1? '女':'男'\" @click=\"showGender=true\" />\n      <van-cell is-link title=\"生日\" :value=\"user.birthday\" @click=\"clickBirthday\" />\n    </van-cell-group>\n\n    <!-- 修改姓名 -->\n    <van-dialog v-model=\"showName\" title=\"标题\" show-cancel-button @confirm=\"saveName\">\n      <van-field v-model.trim=\"newName\" placeholder=\"请输入用户名\" />\n    </van-dialog>\n\n    <!-- 修改性别 -->\n    <van-popup v-model=\"showGender\" position=\"bottom\">\n      <van-nav-bar title=\"修改性别\" left-text=\"取消\" @click-left=\"showGender=false\" />\n      <van-cell title=\"男\" is-link @click=\"saveGender(0)\" />\n      <van-cell title=\"女\" is-link @click=\"saveGender(1)\" />\n    </van-popup>\n\n    <!-- 修改出生日期 -->\n    <van-popup v-model=\"showBirthday\" position=\"bottom\">\n      <van-datetime-picker\n        v-model=\"currentDate\"\n        type=\"date\"\n        title=\"选择年月日\"\n        :min-date=\"minDate\"\n        :max-date=\"maxDate\"\n        @confirm=\"saveBirthday\"\n      />\n    </van-popup>\n  </div>\n</template>\n\n<script>\nimport { getUserIfno, updatePhoto, userinfo } from '@/api/user'\nimport dayjs from 'dayjs'\nexport default {\n  name: 'UserProfile',\n  data() {\n    return {\n      // 控制弹层\n      showName: false,\n      showGender: false,\n      showBirthday: false,\n      // 当前用户的信息\n      user: {},\n      newName: '',\n      minDate: new Date(1990 - 1 - 1),\n      maxDate: new Date(),\n      currentDate: new Date()\n    }\n  },\n  created() {\n    this.getUserInfo()\n  },\n  methods: {\n    async getUserInfo() {\n      const { data } = await getUserIfno()\n      this.user = data\n    },\n    clickName() {\n      this.showName = true\n      this.newName = this.user.name\n    },\n    async saveName() {\n      if (this.newName === '') return\n      await userinfo({ name: this.newName })\n      this.user.name = this.newName\n    },\n    async saveGender(gender) {\n      await userinfo({ gender })\n      this.user.gender = gender\n      this.showGender = false\n    },\n    clickBirthday() {\n      this.showBirthday = true\n      this.currentDate = new Date(this.user.birthday)\n    },\n    async saveBirthday() {\n      const birthday = dayjs(this.currentDate).format('YYYY-MM-DD')\n      await userinfo({ birthday })\n      this.user.birthday = birthday\n      this.showBirthday = false\n    },\n    async iptChange(e) {\n      try {\n        const img = e.target.files[0]\n        if (!img) return\n        this.$toast.loading({\n          message: '文件上传中...',\n          forbidClick: true,\n          overlay: true\n        })\n        const fd = new FormData()\n        fd.append('photo', img)\n        const { data: { photo }} = await updatePhoto(fd)\n        this.user.photo = photo\n        this.$toast.success('更新成功')\n      } catch {\n        this.$toast.fail('更新失败')\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n\n</style>\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./profile.vue?vue&type=template&id=638fbc45&\"\nimport script from \"./profile.vue?vue&type=script&lang=js&\"\nexport * from \"./profile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}