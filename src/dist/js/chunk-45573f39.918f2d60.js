(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45573f39"],{"669d":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"profile"},[n("van-nav-bar",{attrs:{"left-arrow":"",title:"编辑资料"},on:{"click-left":function(t){return e.$router.back()}}}),n("input",{ref:"iptFile",attrs:{type:"file",hidden:""},on:{change:e.iptChange}}),n("van-cell-group",[n("van-cell",{attrs:{"is-link":"",title:"头像",center:""},on:{click:function(t){return e.$refs.iptFile.click()}}},[n("van-image",{attrs:{slot:"default",width:"1.5rem",height:"1.5rem",fit:"cover",round:"",src:e.user.photo},slot:"default"})],1),n("van-cell",{attrs:{"is-link":"",title:"名称",value:e.user.name},on:{click:e.clickName}}),n("van-cell",{attrs:{"is-link":"",title:"性别",value:1===e.user.gender?"女":"男"},on:{click:function(t){e.showGender=!0}}}),n("van-cell",{attrs:{"is-link":"",title:"生日",value:e.user.birthday},on:{click:e.clickBirthday}})],1),n("van-dialog",{attrs:{title:"标题","show-cancel-button":""},on:{confirm:e.saveName},model:{value:e.showName,callback:function(t){e.showName=t},expression:"showName"}},[n("van-field",{attrs:{placeholder:"请输入用户名"},model:{value:e.newName,callback:function(t){e.newName="string"===typeof t?t.trim():t},expression:"newName"}})],1),n("van-popup",{attrs:{position:"bottom"},model:{value:e.showGender,callback:function(t){e.showGender=t},expression:"showGender"}},[n("van-nav-bar",{attrs:{title:"修改性别","left-text":"取消"},on:{"click-left":function(t){e.showGender=!1}}}),n("van-cell",{attrs:{title:"男","is-link":""},on:{click:function(t){return e.saveGender(0)}}}),n("van-cell",{attrs:{title:"女","is-link":""},on:{click:function(t){return e.saveGender(1)}}})],1),n("van-popup",{attrs:{position:"bottom"},model:{value:e.showBirthday,callback:function(t){e.showBirthday=t},expression:"showBirthday"}},[n("van-datetime-picker",{attrs:{type:"date",title:"选择年月日","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.saveBirthday},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1)],1)},a=[],i=n("1da1"),c=(n("b0c0"),n("96cf"),n("c24f")),s=n("5a0c"),o=n.n(s),u={name:"UserProfile",data:function(){return{showName:!1,showGender:!1,showBirthday:!1,user:{},newName:"",minDate:new Date(1988),maxDate:new Date,currentDate:new Date}},created:function(){this.getUserInfo()},methods:{getUserInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["c"])();case 2:n=t.sent,r=n.data,e.user=r;case 5:case"end":return t.stop()}}),t)})))()},clickName:function(){this.showName=!0,this.newName=this.user.name},saveName:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.newName){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(c["i"])({name:e.newName});case 4:e.user.name=e.newName;case 5:case"end":return t.stop()}}),t)})))()},saveGender:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(c["i"])({gender:e});case 2:t.user.gender=e,t.showGender=!1;case 4:case"end":return n.stop()}}),n)})))()},clickBirthday:function(){this.showBirthday=!0,this.currentDate=new Date(this.user.birthday)},saveBirthday:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=o()(e.currentDate).format("YYYY-MM-DD"),t.next=3,Object(c["i"])({birthday:n});case 3:e.user.birthday=n,e.showBirthday=!1;case 5:case"end":return t.stop()}}),t)})))()},iptChange:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,r=e.target.files[0],r){n.next=4;break}return n.abrupt("return");case 4:return t.$toast.loading({message:"文件上传中...",forbidClick:!0,overlay:!0}),a=new FormData,a.append("photo",r),n.next=9,Object(c["h"])(a);case 9:i=n.sent,s=i.data.photo,t.user.photo=s,t.$toast.success("更新成功"),n.next=18;break;case 15:n.prev=15,n.t0=n["catch"](0),t.$toast.fail("更新失败");case 18:case"end":return n.stop()}}),n,null,[[0,15]])})))()}}},l=u,h=n("2877"),f=Object(h["a"])(l,r,a,!1,null,null,null);t["default"]=f.exports},b0c0:function(e,t,n){var r=n("83ab"),a=n("9bf2").f,i=Function.prototype,c=i.toString,s=/^\s*function ([^ (]*)/,o="name";r&&!(o in i)&&a(i,o,{configurable:!0,get:function(){try{return c.call(this).match(s)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-45573f39.918f2d60.js.map