(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26914555"],{"1d4d":function(e,t,n){},"491d":function(e,t,n){"use strict";n("1d4d")},"531f":function(e,t,n){"use strict";n("d2f6")},7156:function(e,t,n){var r=n("861d"),a=n("d2bb");e.exports=function(e,t,n){var i,c;return a&&"function"==typeof(i=t.constructor)&&i!==n&&r(c=i.prototype)&&c!==n.prototype&&a(e,c),e}},"7abe":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("van-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.channels,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name}},[n("ArticleList",{attrs:{id:t.id},on:{showMore:e.showMore}})],1)})),1),n("van-popup",{style:{width:"80%"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("MoreAction",{ref:"moreAction",on:{disLike:e.disLike,report:e.report}})],1),n("div",{staticClass:"bar-btn",on:{click:function(t){e.showChannelEdit=!0}}},[n("van-icon",{attrs:{name:"wap-nav"}})],1),n("van-action-sheet",{attrs:{title:"频道编辑"},model:{value:e.showChannelEdit,callback:function(t){e.showChannelEdit=t},expression:"showChannelEdit"}},[n("ChannelEdit",{attrs:{active:e.active},on:{currentChannel:e.currentChannel,currentActive:e.currentActive}})],1)],1)},a=[],i=n("1da1");n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("159b"),n("dbb4");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n("96cf");var l=n("8691"),u=n("2f62"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"refScroll",staticClass:"articleList",on:{scroll:e.scrollFn}},[n("van-cell-group",[n("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.list,(function(t){return n("van-cell",{key:t.art_id,attrs:{title:t.title},on:{click:function(n){return e.$router.push("/detail/"+t.art_id)}},scopedSlots:e._u([{key:"label",fn:function(){return[t.cover.images?n("van-grid",{attrs:{"column-num":3}},e._l(t.cover.images,(function(e,t){return n("van-grid-item",{key:t},[n("van-image",{attrs:{"lazy-load":"",src:e}})],1)})),1):e._e(),n("div",{staticClass:"meta"},[n("span",[e._v(e._s(t.aut_name))]),n("span",[e._v(e._s(t.comm_count)+"评论")]),n("span",[e._v(e._s(e._f("formateTime")(t.pubdate)))]),e.tokenInfo.token?n("div",{staticClass:"edit",on:{click:function(n){return e.showMore(t.art_id)}}},[n("van-icon",{attrs:{name:"cross"}})],1):e._e()])]},proxy:!0}],null,!0)})})),1)],1)],1)],1)},d=[],h=n("2909"),p=(n("a9e3"),n("99af"),n("5986")),v={props:{id:{type:Number,required:!0}},data:function(){return{list:[],loading:!1,finished:!1,timestamp:null,refreshing:!1,scrollTop:0}},computed:s({},Object(u["e"])("user",["tokenInfo"])),created:function(){var e=this;this.$eventBus.$on("disLike",(function(t){e.id===t.channelsId&&(e.list=e.list.filter((function(e){return e.art_id!==t.articleId})))}))},activated:function(){this.$refs.refScroll.scrollTop=this.scrollTop},methods:{onLoad:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.timestamp||(e.timestamp=+new Date),t.next=3,Object(p["b"])(e.id,e.timestamp);case 3:n=t.sent,e.timestamp=n.data.pre_timestamp,e.list=[].concat(Object(h["a"])(e.list),Object(h["a"])(n.data.results)),e.loading=!1,0!==n.data.results.length&&null!==e.timestamp||(e.finished=!0);case 8:case"end":return t.stop()}}),t)})))()},onRefresh:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["b"])(e.id,+new Date);case 2:n=t.sent,e.timestamp=n.data.pre_timestamp,e.list=n.data.results,e.$toast.success("刷新成功"),e.refreshing=!1;case 7:case"end":return t.stop()}}),t)})))()},showMore:function(e){this.$emit("showMore",e)},scrollFn:function(e){this.scrollTop=e.target.scrollTop}}},b=v,m=(n("f0ee"),n("2877")),g=Object(m["a"])(b,f,d,!1,null,"35afea90",null),w=g.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"moreAction"},[e.isReport?n("van-cell-group",[n("van-cell",{attrs:{icon:"arrow-left"},on:{click:function(t){e.isReport=!1}}},[e._v("返回")]),e._l(e.reportList,(function(t){return n("van-cell",{key:t.value,on:{click:function(n){return e.report(t.value)}}},[e._v(e._s(t.label))])}))],2):n("van-cell-group",[n("van-cell",{on:{click:e.disLike}},[e._v("不感兴趣")]),n("van-cell",{attrs:{"is-link":""},on:{click:function(t){e.isReport=!0}}},[e._v("反馈垃圾内容")]),n("van-cell",[e._v("拉黑作者")])],1)],1)},k=[],O=[{value:1,label:"标题夸张"},{value:2,label:"低俗色情"},{value:3,label:"错别字多"},{value:4,label:"旧闻重复"},{value:6,label:"内容不实"},{value:8,label:"侵权"},{value:5,label:"广告软文"},{value:7,label:"涉嫌违法犯罪"}],C=O,j={name:"MoreActione",data:function(){return{isReport:!1,reportList:C}},methods:{disLike:function(){this.$emit("disLike")},report:function(e){this.$emit("report",e)}}},y=j,x=Object(m["a"])(y,_,k,!1,null,null,null),I=x.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"channelEdit"},[n("div",{staticClass:"channel"},[n("van-cell",{attrs:{title:"我的频道",border:!1}},[n("van-button",{attrs:{plain:"",size:"mini",type:"danger"},on:{click:function(t){e.isShow=!e.isShow}}},[e._v(e._s(e.isShow?"取消":"编辑"))])],1),n("van-grid",e._l(e.channels,(function(t,r){return n("van-grid-item",{key:t.id,on:{click:function(t){return e.delChannel(r)}}},[n("span",{class:{current:r===e.active},on:{click:function(t){return e.currentChannel(r)}}},[e._v(e._s(t.name))]),e.isShow&&0!==r?n("van-icon",{staticClass:"btn",attrs:{name:"cross"}}):e._e()],1)})),1)],1),n("div",{staticClass:"channel"},[n("van-cell",{attrs:{title:"可选频道",border:!1}}),n("van-grid",e._l(e.optionalChannels,(function(t){return n("van-grid-item",{key:t.id,on:{click:function(n){return e.addChannelsFn(t)}}},[n("span",[e._v(e._s(t.name))])])})),1)],1)])},A=[],N=(n("d81d"),n("a434"),{name:"ChannelEdit",props:{active:{type:Number,default:0}},data:function(){return{isShow:!1}},computed:s(s({},Object(u["e"])("channels",["channels"])),Object(u["c"])("channels",["optionalChannels"])),created:function(){this.getAllChannels()},methods:s(s(s({},Object(u["b"])("channels",["getAllChannels"])),Object(u["d"])("channels",["addChannels"])),{},{addChannelsFn:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.addChannels(e),r=t.channels.map((function(e,t){return{id:e.id,seq:t}})),n.next=4,Object(p["d"])(r);case 4:case"end":return n.stop()}}),n)})))()},delChannel:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!1!==t.isShow){n.next=2;break}return n.abrupt("return");case 2:return e===t.active&&t.$emit("currentActive",0),e<t.active&&t.$emit("currentActive",t.active-1),t.channels.splice(e,1),r=t.channels.map((function(e,t){return{id:e.id,seq:t}})),n.next=8,Object(p["d"])(r);case 8:case"end":return n.stop()}}),n)})))()},currentChannel:function(e){!0!==this.isShow&&this.$emit("currentChannel",e)}})}),R=N,$=(n("491d"),Object(m["a"])(R,E,A,!1,null,"50dc9f1a",null)),L=$.exports,S={name:"Home",components:{ArticleList:w,MoreAction:I,ChannelEdit:L},data:function(){return{active:0,show:!1,articleId:"",showChannelEdit:!1}},computed:s({},Object(u["e"])("channels",["channels"])),created:function(){this.getChannels()},methods:s(s({},Object(u["b"])("channels",["getChannels"])),{},{showMore:function(e){var t=this;this.show=!0,this.articleId=e,this.$nextTick((function(){t.$refs.moreAction.isReport=!1}))},disLike:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["k"])(e.articleId);case 2:e.show=!1,n={articleId:e.articleId,channelsId:e.channels[e.active].id},e.$eventBus.$emit("disLike",n);case 5:case"end":return t.stop()}}),t)})))()},report:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(l["l"])(t.articleId,e);case 2:t.show=!1,r={articleId:t.articleId,channelsId:t.channels[t.active].id},t.$eventBus.$emit("disLike",r);case 5:case"end":return n.stop()}}),n)})))()},currentChannel:function(e){this.showChannelEdit=!1,this.active=e},currentActive:function(e){this.active=e}})},M=S,T=(n("531f"),Object(m["a"])(M,r,a,!1,null,"56f85848",null));t["default"]=T.exports},"99af":function(e,t,n){"use strict";var r=n("23e7"),a=n("d039"),i=n("e8b5"),c=n("861d"),o=n("7b0b"),s=n("50c4"),l=n("8418"),u=n("65f0"),f=n("1dde"),d=n("b622"),h=n("2d00"),p=d("isConcatSpreadable"),v=9007199254740991,b="Maximum allowed index exceeded",m=h>=51||!a((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),g=f("concat"),w=function(e){if(!c(e))return!1;var t=e[p];return void 0!==t?!!t:i(e)},_=!m||!g;r({target:"Array",proto:!0,forced:_},{concat:function(e){var t,n,r,a,i,c=o(this),f=u(c,0),d=0;for(t=-1,r=arguments.length;t<r;t++)if(i=-1===t?c:arguments[t],w(i)){if(a=s(i.length),d+a>v)throw TypeError(b);for(n=0;n<a;n++,d++)n in i&&l(f,d,i[n])}else{if(d>=v)throw TypeError(b);l(f,d++,i)}return f.length=d,f}})},a434:function(e,t,n){"use strict";var r=n("23e7"),a=n("23cb"),i=n("a691"),c=n("50c4"),o=n("7b0b"),s=n("65f0"),l=n("8418"),u=n("1dde"),f=u("splice"),d=Math.max,h=Math.min,p=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var n,r,u,f,b,m,g=o(this),w=c(g.length),_=a(e,w),k=arguments.length;if(0===k?n=r=0:1===k?(n=0,r=w-_):(n=k-2,r=h(d(i(t),0),w-_)),w+n-r>p)throw TypeError(v);for(u=s(g,r),f=0;f<r;f++)b=_+f,b in g&&l(u,f,g[b]);if(u.length=r,n<r){for(f=_;f<w-r;f++)b=f+r,m=f+n,b in g?g[m]=g[b]:delete g[m];for(f=w;f>w-r+n;f--)delete g[f-1]}else if(n>r)for(f=w-r;f>_;f--)b=f+r-1,m=f+n-1,b in g?g[m]=g[b]:delete g[m];for(f=0;f<n;f++)g[f+_]=arguments[f+2];return g.length=w-r+n,u}})},a9e3:function(e,t,n){"use strict";var r=n("83ab"),a=n("da84"),i=n("94ca"),c=n("6eeb"),o=n("5135"),s=n("c6b6"),l=n("7156"),u=n("c04e"),f=n("d039"),d=n("7c73"),h=n("241c").f,p=n("06cf").f,v=n("9bf2").f,b=n("58a8").trim,m="Number",g=a[m],w=g.prototype,_=s(d(w))==m,k=function(e){var t,n,r,a,i,c,o,s,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=b(l),t=l.charCodeAt(0),43===t||45===t){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+l}for(i=l.slice(2),c=i.length,o=0;o<c;o++)if(s=i.charCodeAt(o),s<48||s>a)return NaN;return parseInt(i,r)}return+l};if(i(m,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var O,C=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof C&&(_?f((function(){w.valueOf.call(n)})):s(n)!=m)?l(new g(k(t)),n,C):k(t)},j=r?h(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),y=0;j.length>y;y++)o(g,O=j[y])&&!o(C,O)&&v(C,O,p(g,O));C.prototype=w,w.constructor=C,c(a,m,C)}},b64b:function(e,t,n){var r=n("23e7"),a=n("7b0b"),i=n("df75"),c=n("d039"),o=c((function(){i(1)}));r({target:"Object",stat:!0,forced:o},{keys:function(e){return i(a(e))}})},c817:function(e,t,n){},d2f6:function(e,t,n){},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map,i=n("1dde"),c=i("map");r({target:"Array",proto:!0,forced:!c},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(e,t,n){var r=n("23e7"),a=n("83ab"),i=n("56ef"),c=n("fc6a"),o=n("06cf"),s=n("8418");r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,n,r=c(e),a=o.f,l=i(r),u={},f=0;while(l.length>f)n=a(r,t=l[f++]),void 0!==n&&s(u,t,n);return u}})},e439:function(e,t,n){var r=n("23e7"),a=n("d039"),i=n("fc6a"),c=n("06cf").f,o=n("83ab"),s=a((function(){c(1)})),l=!o||s;r({target:"Object",stat:!0,forced:l,sham:!o},{getOwnPropertyDescriptor:function(e,t){return c(i(e),t)}})},f0ee:function(e,t,n){"use strict";n("c817")}}]);
//# sourceMappingURL=chunk-26914555.52edc8a5.js.map