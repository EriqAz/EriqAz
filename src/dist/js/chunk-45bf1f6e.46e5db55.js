(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-45bf1f6e"],{"498a":function(t,e,n){"use strict";var a=n("23e7"),i=n("58a8").trim,r=n("c8d2");a({target:"String",proto:!0,forced:r("trim")},{trim:function(){return i(this)}})},6962:function(t,e,n){},"80c7":function(t,e,n){"use strict";n("cc5d")},9342:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}));var a=n("b775"),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(a["a"])({method:"get",url:"/v1_0/search",params:{q:t,page:e,per_page:n}})},r=function(t){return Object(a["a"])({method:"get",url:"/v1_0/articles/"+t})}},c854:function(t,e,n){"use strict";n("ed24")},c8d2:function(t,e,n){var a=n("d039"),i=n("5899"),r="​᠎";t.exports=function(t){return a((function(){return!!i[t]()||r[t]()!=r||i[t].name!==t}))}},cc5d:function(t,e,n){},e0e9:function(t,e,n){"use strict";n("6962")},ec8d:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-container"},[n("van-nav-bar",{attrs:{fixed:"","left-arrow":"",title:"文章详情"},on:{"click-left":function(e){return t.$router.back()}}}),t.loading?n("van-loading",{staticClass:"article-loading"}):t._e(),n("div",{staticClass:"detail"},[n("h3",{staticClass:"title"},[t._v(t._s(t.article.title))]),n("div",{staticClass:"author"},[n("van-image",{attrs:{round:"",width:"1rem",height:"1rem",fit:"fill",src:t.article.aut_photo}}),n("div",{staticClass:"text"},[n("p",{staticClass:"name"},[t._v(t._s(t.article.aut_name))]),n("p",{staticClass:"time"},[t._v(t._s(t._f("formateTime")(t.article.pubdata)))])]),n("van-button",{attrs:{round:"",size:"small",type:"info"},on:{click:function(e){return t.clickFollow(t.article.aut_id)}}},[t._v(t._s(t.article.is_followed?"取 消":"+ 关注"))])],1),n("div",{staticClass:"content"},[n("div",{domProps:{innerHTML:t._s(t.article.content)}})]),n("van-divider",[t._v("END")]),n("div",{staticClass:"zan"},[n("van-button",{attrs:{round:"",size:"small",hairline:"",type:"primary",plain:"",icon:1===t.article.attitude?"good-job":"good-job-o"},on:{click:function(e){return t.clickAttitude(t.article.art_id)}}},[t._v(t._s(1===t.article.attitude?"取消点赞":"点赞"))]),t._v("      "),n("van-button",{attrs:{round:"",size:"small",hairline:"",type:"danger",plain:"",icon:"delete"},on:{click:function(e){return t.clickLike(t.article.art_id)}}},[t._v(t._s(0===t.article.attitude?"取消不喜欢":"不喜欢"))])],1)],1),n("ArticleComment",{attrs:{"article-id":t.$route.params.id}})],1)},i=[],r=n("1da1"),c=(n("96cf"),n("159b"),n("9342")),o=n("c24f"),s=n("8691"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-comments"},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return n("van-cell",{key:a},[n("van-image",{staticStyle:{"margin-right":"10px"},attrs:{slot:"icon",round:"",width:"30",height:"30",src:e.aut_photo},slot:"icon"}),n("span",{staticStyle:{color:"#466b9d"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.aut_name))]),n("div",{attrs:{slot:"label"},slot:"label"},[n("p",{staticStyle:{color:"#363636"}},[t._v(t._s(e.content))]),n("p",[n("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(t._f("formateTime")(e.pubdate)))]),n("van-button",{attrs:{size:"mini",type:"default"},on:{click:function(n){return t.showReply(e)}}},[t._v("回复")])],1)]),n("van-icon",{attrs:{slot:"right-icon",color:e.is_liking?"red":"",name:e.is_liking?"like":"like-o"},on:{click:function(n){return t.addIsLike(e.com_id)}},slot:"right-icon"})],1)})),1),n("van-cell-group",{staticClass:"publish-wrap"},[n("van-field",{attrs:{clearable:"",placeholder:"请输入评论内容"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}},[n("van-button",{attrs:{slot:"button",size:"mini",type:"info"},on:{click:t.addComment},slot:"button"},[t._v("发布")])],1)],1),n("van-popup",{style:{height:"85%"},attrs:{round:"",position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t.show?n("CommentReply",{attrs:{comment:t.currentComment,"article-id":t.articleId},on:{closeReply:t.closeReply}}):t._e()],1)],1)},u=[],d=n("2909"),m=(n("498a"),n("4de4"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-comments"},[n("van-nav-bar",{attrs:{title:t.comment.reply_count+"条回复"}},[n("van-icon",{attrs:{slot:"left",name:"cross"},on:{click:t.closeReply},slot:"left"})],1),n("van-cell",{attrs:{title:"当前评论"}},[n("van-image",{staticStyle:{"margin-right":"10px"},attrs:{slot:"icon",round:"",width:"30",height:"30",src:t.comment.aut_photo},slot:"icon"}),n("span",{staticStyle:{color:"#466b9d"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.comment.aut_name))]),n("div",{attrs:{slot:"label"},slot:"label"},[n("p",{staticStyle:{color:"#363636"}},[t._v(t._s(t.comment.content))]),n("p",[n("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(t._f("formateTime")(t.comment.pubdate)))]),n("van-button",{attrs:{size:"mini",type:"default"}},[t._v("回复"+t._s(t.comment.reply_count))])],1)]),n("van-icon",{attrs:{slot:"right-icon"},slot:"right-icon"})],1),n("van-divider",[t._v("全部回复")]),n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return n("van-cell",{key:a},[n("van-image",{staticStyle:{"margin-right":"10px"},attrs:{slot:"icon",round:"",width:"30",height:"30",src:e.aut_photo},slot:"icon"}),n("span",{staticStyle:{color:"#466b9d"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.aut_name))]),n("div",{attrs:{slot:"label"},slot:"label"},[n("p",{staticStyle:{color:"#363636"}},[t._v(t._s(e.content))]),n("p",[n("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(t._f("formateTime")(e.pubdate)))])])])],1)})),1),n("van-cell-group",{staticClass:"publish-wrap"},[n("van-field",{attrs:{clearable:"",placeholder:"请输入回复内容"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}},[n("van-button",{attrs:{slot:"button",size:"mini",type:"info"},on:{click:t.addReply},slot:"button"},[t._v("发布")])],1)],1)],1)}),p=[],f={name:"CommentReply",props:{comment:{type:Object,required:!0},articleId:{type:String,required:!0}},data:function(){return{list:[],loading:!1,finished:!1,offset:null,content:""}},methods:{onLoad:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["j"])(t.comment.com_id,t.offset);case 2:a=e.sent,i=a.data,(n=t.list).push.apply(n,Object(d["a"])(i.results)),t.offset=i.last_id,t.loading=!1,i.results.length<10&&(t.finished=!0);case 8:case"end":return e.stop()}}),e)})))()},addReply:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.content.trim()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(s["b"])(t.comment.com_id,t.content,t.articleId);case 4:n=e.sent,a=n.data,t.list.unshift(a.new_obj),t.comment.reply_count++,t.content="";case 9:case"end":return e.stop()}}),e)})))()},closeReply:function(){this.$emit("closeReply")}}},h=f,v=(n("c854"),n("2877")),b=Object(v["a"])(h,m,p,!1,null,"733aaa66",null),_=b.exports,g={name:"ArticleComment",components:{CommentReply:_},props:{articleId:{type:String,required:!0}},data:function(){return{list:[],loading:!1,finished:!1,lastId:null,content:"",show:!1,currentComment:""}},methods:{onLoad:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["e"])(t.articleId,t.lastId);case 2:a=e.sent,i=a.data,(n=t.list).push.apply(n,Object(d["a"])(i.results)),t.lastId=i.last_id,t.loading=!1,i.results.length<10&&(t.finished=!0);case 8:case"end":return e.stop()}}),e)})))()},addComment:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==t.content.trim()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(s["i"])(t.articleId,t.content);case 4:n=e.sent,a=n.data,t.list.unshift(a.new_obj),t.content="";case 8:case"end":return e.stop()}}),e)})))()},showReply:function(t){this.show=!0,this.currentComment=t},closeReply:function(){this.show=!1},addIsLike:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.list.filter((function(e){return e.com_id===t})),!a[0].is_liking){n.next=7;break}return n.next=4,Object(s["c"])(t);case 4:a[0].is_liking=!1,n.next=10;break;case 7:return n.next=9,Object(s["a"])(t);case 9:a[0].is_liking=!0;case 10:case"end":return n.stop()}}),n)})))()}}},k=g,w=(n("80c7"),Object(v["a"])(k,l,u,!1,null,"120c6c6c",null)),x=w.exports,y={name:"ArticleIndex",components:{ArticleComment:x},data:function(){return{loading:!0,article:{}}},created:function(){this.loadDeatil()},methods:{loadDeatil:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])(t.$route.params.id);case 2:n=e.sent,a=n.data,t.article=a,t.loading=!1,t.$nextTick((function(){var t=document.querySelectorAll(".content img");t.forEach((function(t){t.src=t.dataset.originalSrc||t.dataset.src||"https://img1.baidu.com/it/u=3901311039,2934597827&fm=26&fmt=auto&gp=0.jpg"}))}));case 7:case"end":return e.stop()}}),e)})))()},clickFollow:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!0!==e.article.is_followed){n.next=7;break}return n.next=3,Object(o["b"])(t);case 3:e.article.is_followed=!1,e.$toast.success("取关成功"),n.next=11;break;case 7:return n.next=9,Object(o["a"])(t);case 9:e.article.is_followed=!0,e.$toast.success("关注成功");case 11:case"end":return n.stop()}}),n)})))()},clickAttitude:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(1!==e.article.attitude){n.next=6;break}return e.article.attitude=-1,n.next=4,Object(s["h"])(t);case 4:n.next=9;break;case 6:return e.article.attitude=1,n.next=9,Object(s["d"])(t);case 9:case"end":return n.stop()}}),n)})))()},clickLike:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==e.article.attitude){n.next=6;break}return e.article.attitude=-1,n.next=4,Object(s["g"])(t);case 4:n.next=9;break;case 6:return e.article.attitude=0,n.next=9,Object(s["f"])(t);case 9:case"end":return n.stop()}}),n)})))()}}},j=y,R=(n("e0e9"),Object(v["a"])(j,a,i,!1,null,"26d5388e",null));e["default"]=R.exports},ed24:function(t,e,n){}}]);
//# sourceMappingURL=chunk-45bf1f6e.46e5db55.js.map